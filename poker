//比較乾淨的程式

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define N 52
#define SWAP(a, b){int t; t=a; a=b; b=t;}


#define BUF_SIZE 3
const char flower[4] = {'\5','\4','\3','\6'}; // 4個花色
const char number[13][BUF_SIZE] = {
    " A", " 2", " 3", " 4", " 5", " 6",
    " 7", " 8", " 9", "10", " J", " Q", " K"};

// ====================================
// shuttle
void shuttle(int *array, int Size)
{
    int i, pos;
    srand((unsigned)time(NULL));
    rand(); // 先抽掉一個亂數

    for(i=0; i!=Size; ++i){
       // 取出第 pos 張牌
       // pos = rand()%52; // worst
       pos = (int) (N*(double)rand()/(RAND_MAX+1.0)); // better
       // 將第 i 張牌與第 pos 張牌交換
       SWAP(array[i], array[pos]); 
    }
}

// ====================================
// display
void display_poker(int *poker, int Size)
{
    int i;
    for(i=0; i!=Size; ++i) {
       // 顯示花色, flower_index = poker[i] % 4
       putchar(flower[ poker[i] % 4 ]); 
       // 顯示點數, number_index = poker[i] / 4
       // printf("%s ", number[ poker[i]/4 ]);
       printf("%s", number[ poker[i] >> 2 ]); // faster
       if(i%13==12) putchar('\n');
    }
}

int main()
{
    int i, poker[N];
    for(i=0; i!=N; ++i) poker[i] = i;
    shuttle(poker, N);
    display_poker(poker, N);
    return 0;
}
